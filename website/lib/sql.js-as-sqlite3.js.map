{"version":3,"file":"sql.js-as-sqlite3.min.js","sources":["../node_modules/eventemitter3/index.js","../modules/Database.js","../modules/getNextTickFunction.js","../modules/index.js"],"sourcesContent":["'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nimport EventEmitter from 'eventemitter3';\nimport getNextTickFunction from './getNextTickFunction.js';\nvar config = {};\nexport function configure(_ref) {\n  var initSqlJs = _ref.initSqlJs,\n    wasmFileBaseUrl = _ref.wasmFileBaseUrl;\n  config.initSqlJs = initSqlJs;\n  config.wasmFileBaseUrl = wasmFileBaseUrl;\n}\n\n// `sqlite3`'s `Database` interface:\n// https://github.com/TryGhost/node-sqlite3/blob/master/lib/sqlite3.d.ts\n//\n// Extends `EventEmitter` to mimick `sqlite3`'s `Database` behavior.\n// Only emits a few events:\n// * \"open\"\n// * \"close\"\n// * \"error\"\n// Doesn't emit events:\n// * \"trace\"\n// * \"profile\"\n// * \"change\"\n//\nvar Database = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(Database, _EventEmitter);\n  // `filename: string` is a path to the file in which the data will be stored. Example: \":memory:\".\n  // `mode?: number` is an optional access mode: read-only, read-write, etc.\n  // `callback?: function` gets called after the database is ready, or if there was an error.\n  function Database(filename, mode, callback) {\n    var _this;\n    _classCallCheck(this, Database);\n    _this = _callSuper(this, Database);\n    if (typeof mode === 'function') {\n      callback = mode;\n      mode = undefined;\n    }\n\n    // Since `sqlite3`'s `Database` is declared to be an `EventEmitter`,\n    // developers will be (appropriately) using it as:\n    //\n    // const database = new Database(filename, callback)\n    // database.on('eventName', eventHandler)\n    //\n    // And they'll be expecting the `callback` to always be fired after those `.on()` calls\n    // and never before them.\n    // If the `callback` was called here as is, i.e. as simply `callback()`,\n    // it would've been called before those `.on()` event listeners have been set up\n    // resulting in a potential loss of some of the events.\n    //\n    // So the name of this function signals that `callback()` should always be called\n    // \"asynchronously\" rather than \"synchronously\".\n    //\n    var callCallbackAsynchronously = function callCallbackAsynchronously(error) {\n      // `process.nextTick()` workaround is not used in this code, the reasons being:\n      // * It only works on server side.\n      // * The `initSqlJs()` function already introduces an \"asynchronicity\" of its own.\n      callback(error);\n    };\n\n    // \"By default, sql.js uses wasm, and thus needs to load a `.wasm` file\n    //  in addition to the javascript library. You can find this file in\n    //  `./node_modules/sql.js/dist/sql-wasm.wasm` after installing sql.js from npm,\n    //  and instruct your bundler to add it to your static assets or load it from a CDN\".\n    //\n    // \"Then use the locateFile property of the configuration object passed to\n    //  `initSqlJs` to indicate where the file is. If you use an asset builder\n    //  such as webpack, you can automate this\".\n    //\n    // \"Required to load the wasm binary asynchronously.\n    //  Of course, you can host it wherever you want\".\n    //\n    // A client application could define the \"base\" URL of a WASM file either way:\n    // * By calling `.config()` static function with a `wasmFileBaseUrl` parameter.\n    // * By setting `window.SQL_JS_WASM_FILE_BASE_URL` global variable.\n    //\n    var sqlJsWasmFileBaseUrl = config.wasmFileBaseUrl || (typeof window !== 'undefined' ? window.SQL_JS_WASM_FILE_BASE_URL : undefined);\n    var isNodeJs = typeof process !== 'undefined' && process.release.name === 'node';\n    var onError = function onError(error) {\n      if (callback) {\n        // Call the `callback`.\n        callCallbackAsynchronously(error);\n      } else {\n        // \"If no `callback` is provided and an error occurred,\n        // an `error` event with the error object as the only parameter\n        // will be emitted\".\n        _this.emit('error', error);\n      }\n    };\n    var onSuccess = function onSuccess() {\n      // \"If opening succeeded, an `open` event with no parameters is emitted,\n      //  regardless of whether a `callback` was provided or not\".\n      _this.emit('open');\n      // Call the `callback`.\n      if (callback) {\n        callCallbackAsynchronously(null);\n      }\n    };\n    if (!isNodeJs) {\n      if (!sqlJsWasmFileBaseUrl) {\n        return _possibleConstructorReturn(_this, onError(new Error('The base URL for `sql.js` `*.wasm` files is not configured')));\n      }\n      if (sqlJsWasmFileBaseUrl[sqlJsWasmFileBaseUrl.length - 1] !== '/') {\n        return _possibleConstructorReturn(_this, onError(new Error('The base URL for `sql.js` `*.wasm` files must end with a \"/\"')));\n      }\n    }\n    var initSqlJsPromise = config.initSqlJs ? Promise.resolve(config.initSqlJs) : isNodeJs ? import('sql.js').then(function (_) {\n      return _[\"default\"];\n    }) : typeof window !== 'undefined' ? Promise.resolve(window.initSqlJs) : Promise.reject(new Error('`window` is not defined'));\n    initSqlJsPromise.then(function (initSqlJs) {\n      if (!initSqlJs) {\n        return onError(new Error('`sql.js` not found'));\n      }\n      // Initialize `sql.js` — fetch the \".wasm\" file and run it.\n      return initSqlJs({\n        // \"You can omit `locateFile` when running in Node.js\".\n        //\n        // When `locateFile` parameter is not omitted in Node.js, it throws an error:\n        // \"Error: ENOENT: no such file or directory, open 'https:\\sql.js.org\\dist\\sql-wasm.wasm'\".\n        //\n        // May be somehow related: https://github.com/sql-js/sql.js/issues/528\n        //\n        locateFile: isNodeJs ? undefined : function (filename) {\n          return \"\".concat(sqlJsWasmFileBaseUrl).concat(filename);\n        }\n      }).then(function (SQL) {\n        // Create a database.\n        _this.database = new SQL.Database();\n        onSuccess();\n      }, onError);\n    }, onError);\n    return _this;\n  }\n\n  // \"Closes the database.\n  //  `callback` (optional): If provided, this function will be called when the database\n  //  was closed successfully or when an error occurred. The first argument is an `error` object.\n  //  When it is null, closing succeeded. If no `callback` is provided and an error occurred,\n  //  an \"error\" event with the `error` object as the only parameter will be emitted on the database object.\n  //  If closing succeeded, a \"close\" event with no parameters is emitted, regardless of whether\n  //  a `callback` was provided or not.\n  _createClass(Database, [{\n    key: \"close\",\n    value: function close(callback) {\n      this.database.close();\n      this.emit('close');\n      if (callback) {\n        callback(null);\n      }\n    }\n\n    // \"Set a configuration option for the database. Valid options are:\n    //  * Tracing & profiling\n    //    * trace: provide a function callback as a value. Invoked when an SQL statement executes, with a rendering of the statement text.\n    //    * profile: provide a function callback. Invoked every time an SQL statement executes.\n    //  * busyTimeout: provide an integer as a value. Sets the busy timeout\".\n  }, {\n    key: \"configure\",\n    value: function configure(option, value) {}\n\n    // \"Loads a compiled SQLite extension into the database connection object\".\n  }, {\n    key: \"loadExtension\",\n    value: function loadExtension(path, callback) {\n      throw new Error('`loadExtension()` is not supported');\n    }\n\n    // \"Allows the user to interrupt long-running queries.\n    //  Wrapper around `sqlite3_interrupt` and causes other data-fetching functions\n    //  to be passed an `error` with `code = sqlite3.INTERRUPT`\".\n  }, {\n    key: \"interrupt\",\n    value: function interrupt() {\n      // This method is not implemented because `sql.js` methods are \"synchronous\" (\"blocking\").\n\n      // this.database.exec('select interrupt();')\n    }\n\n    // There're no docs on this method.\n    // I guess it calls the `callback` after all queries have finished.\n  }, {\n    key: \"wait\",\n    value: function wait(callback) {\n      // `sql.js` methods are \"synchronous\" (\"blocking\")\n      // so the `wait()` method doesn't really make sense here.\n      // It just calls the `callback`.\n      if (callback) {\n        callback(null);\n      }\n    }\n\n    // https://stackoverflow.com/questions/41949724/how-does-db-serialize-work-in-node-sqlite3\n    // \"Each command inside the `serialize()`'s `func` function is guaranteed to finish executing\n    //  before the next one starts\".\n  }, {\n    key: \"serialize\",\n    value: function serialize(func) {\n      func();\n    }\n\n    // https://www.sqlitetutorial.net/sqlite-nodejs/statements-control-flow/\n    // \"The `serialize()` method allows you to execute statements in serialized mode,\n    //  while the `parallelize()` method executes the statements in parallel\".\n  }, {\n    key: \"parallelize\",\n    value: function parallelize(func) {\n      func();\n    }\n\n    // \"Runs the SQL query with the specified parameters and calls the `callback` afterwards.\n    //  It does not retrieve any result data\".\n  }, {\n    key: \"run\",\n    value: function run() {\n      var _this2 = this;\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      var _getRunArguments = getRunArguments(args),\n        query = _getRunArguments.query,\n        unboundCallback = _getRunArguments.callback,\n        parameters = _getRunArguments.parameters;\n\n      // \"The context of the `callback` function (the `this` object inside the function)\n      //  is the statement object\".\n      //\n      // \"If execution was successful, the this object will contain two properties named\n      //  `lastID` and `changes` which contain the value of the last inserted row ID\n      //  and the number of rows affected by this query respectively\".\n      //\n      var statement = {};\n      var callback = unboundCallback;\n      if (callback) {\n        callback = callback.bind(statement);\n      }\n      try {\n        // Run the query.\n        this.database.run(query, parameters);\n\n        // Just a simple \"lame\" SQL operation type detection.\n        var isInsert = /^\\s*insert\\s+/i.test(query);\n        var isUpdate = /^\\s*update\\s+/i.test(query);\n        var isDelete = /^\\s*delete\\s+/i.test(query);\n\n        // Gets a value from the database.\n        var getValue = function getValue(query) {\n          var results = _this2.database.exec(query + ';');\n          return results[0].values[0][0];\n        };\n        if (isInsert) {\n          // The row ID of the most recent successful INSERT.\n          statement.lastID = getValue('select last_insert_rowid()');\n        }\n        if (isInsert || isUpdate || isDelete) {\n          // The number of rows modified, inserted or deleted by the most recently completed\n          // INSERT, UPDATE or DELETE statement.\n          statement.changes = getValue('select changes()');\n        }\n        if (callback) {\n          callCallbackAsynchronously(callback, null);\n        }\n      } catch (error) {\n        if (callback) {\n          callCallbackAsynchronously(callback, error);\n        } else {\n          // \"When no `callback` is provided and an error occurs,\n          //  an \"error\" event will be emitted\".\n          this.emit('error', error);\n          // throw error\n        }\n      }\n\n      // Returns `this` for method chaining.\n      return this;\n    }\n\n    // \"Runs the SQL query with the specified parameters and calls the `callback`\n    //  with all result rows afterwards\".\n  }, {\n    key: \"all\",\n    value: function all() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      var _getRunArguments2 = getRunArguments(args),\n        query = _getRunArguments2.query,\n        callback = _getRunArguments2.callback,\n        parameters = _getRunArguments2.parameters;\n      try {\n        var results = [];\n        this.database.each(query, parameters,\n        // When a query has produced a result (only for `SELECT` queries).\n        function (result) {\n          results.push(result);\n        },\n        // When all queries have finished.\n        function () {\n          if (callback) {\n            callCallbackAsynchronously(callback, null, results);\n          }\n        });\n      } catch (error) {\n        if (callback) {\n          callCallbackAsynchronously(callback, error);\n        } else {\n          throw error;\n        }\n      }\n\n      // Returns `this` for method chaining.\n      return this;\n    }\n\n    // \"Runs the SQL query with the specified parameters and calls the `callback`\n    //  once for each result row\".\n  }, {\n    key: \"each\",\n    value: function each() {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n      var _getRunArguments3 = getRunArguments(args),\n        query = _getRunArguments3.query,\n        callback = _getRunArguments3.callback,\n        parameters = _getRunArguments3.parameters;\n      try {\n        var results = [];\n        this.database.each(query, parameters,\n        // When a query has produced a result (only for `SELECT` queries).\n        function (result) {\n          if (callback) {\n            callCallbackAsynchronously(callback, null, result);\n          }\n        });\n      } catch (error) {\n        if (callback) {\n          callCallbackAsynchronously(callback, error);\n        } else {\n          throw error;\n        }\n      }\n\n      // Returns `this` for method chaining.\n      return this;\n    }\n  }, {\n    key: \"get\",\n    value: function get() {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n      var _getRunArguments4 = getRunArguments(args),\n        query = _getRunArguments4.query,\n        callback = _getRunArguments4.callback,\n        parameters = _getRunArguments4.parameters;\n      try {\n        var results = this.database.exec(query, parameters);\n\n        // \"If the result set is empty, the second parameter is `undefined`,\n        //  otherwise it is an object containing the values for the first row.\n        //  The property `names` correspond to the column names of the result set\".\n        //\n        // I dunno if the `result` object is correct or not.\n        // It's more of a \"placeholder\" implementation.\n        //\n        var result = results[0];\n        if (callback) {\n          callCallbackAsynchronously(callback, null, result);\n        }\n      } catch (error) {\n        if (callback) {\n          callCallbackAsynchronously(callback, error);\n        } else {\n          throw error;\n        }\n      }\n\n      // Returns `this` for method chaining.\n      return this;\n    }\n\n    // \"Runs all SQL queries in the supplied string. No result rows are retrieved\".\n  }, {\n    key: \"exec\",\n    value: function exec(query, callback) {\n      try {\n        this.database.exec(query);\n        if (callback) {\n          callCallbackAsynchronously(callback, null);\n        }\n      } catch (error) {\n        if (callback) {\n          callCallbackAsynchronously(callback, error);\n        } else {\n          // \"When no `callback` is provided and an error occurs,\n          //  an \"error\" event will be emitted\".\n          this.emit('error', error);\n          // throw error\n        }\n      }\n\n      // Returns `this` for method chaining.\n      return this;\n    }\n\n    // \"Prepares the SQL statement and optionally binds the specified parameters\n    //  and calls the callback when done. The function returns a Statement object.\"\n  }, {\n    key: \"prepare\",\n    value: function prepare() {\n      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        args[_key5] = arguments[_key5];\n      }\n      var _getRunArguments5 = getRunArguments(args),\n        query = _getRunArguments5.query,\n        callback = _getRunArguments5.callback,\n        parameters = _getRunArguments5.parameters;\n      var statement = {};\n      try {\n        statement = this.database.prepare(query, parameters);\n        if (callback) {\n          callCallbackAsynchronously(callback, null);\n        }\n      } catch (error) {\n        if (callback) {\n          callCallbackAsynchronously(callback, error);\n        } else {\n          throw error;\n        }\n      }\n      return statement;\n    }\n  }]);\n  return Database;\n}(EventEmitter);\nexport { Database as default };\nvar nextTick = getNextTickFunction();\nfunction callCallbackAsynchronously(callback, error, result) {\n  nextTick(function () {\n    return callback(error, result);\n  });\n}\nfunction getEnvVars() {\n  if (typeof process !== 'undefined') {\n    return process.env;\n  }\n}\nfunction getRunArguments(args) {\n  var query = args.shift();\n  var parameters;\n  var callback;\n\n  // Sort out the arguments.\n  if (args.length === 0) {\n    parameters = [];\n  } else {\n    if (typeof args[args.length - 1] === 'function') {\n      callback = args.pop();\n    }\n    parameters = args;\n  }\n\n  // If parameters were passed as an object then convert them to an object.\n  if (parameters.length === 1) {\n    if (parameters[0] !== null && _typeof(parameters[0]) === 'object') {\n      parameters = parameters[0];\n    }\n  }\n  return {\n    query: query,\n    parameters: parameters,\n    callback: callback\n  };\n}\n//# sourceMappingURL=Database.js.map","// https://timnew.me/blog/2014/06/23/process-nexttick-implementation-in-browser/\nexport default function getNextTickFunction() {\n  // In Node.js.\n  if (typeof process !== 'undefined' && typeof process.nextTick === 'function') {\n    // Calls the `callback` via `process.nextTick(callback, error)` to emulate \"asynchronous\" behavior.\n    // https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick#why-use-processnexttick\n    return function (f) {\n      process.nextTick(f);\n    };\n  }\n  var canSetImmediate = typeof window !== 'undefined' && window.setImmediate;\n  var canPost = typeof window !== 'undefined' && window.postMessage && window.addEventListener;\n  if (canSetImmediate) {\n    return function (f) {\n      window.setImmediate(f);\n    };\n  }\n  if (canPost) {\n    var queue = [];\n    window.addEventListener('message', function (ev) {\n      var source = ev.source;\n      if ((source === window || source === null) && ev.data === 'process-tick') {\n        ev.stopPropagation();\n        if (queue.length > 0) {\n          var fn = queue.shift();\n          fn();\n        }\n      }\n    }, true);\n    return function nextTick(fn) {\n      queue.push(fn);\n      window.postMessage('process-tick', '*');\n    };\n  }\n  return function nextTick(fn) {\n    setTimeout(fn, 0);\n  };\n}\n//# sourceMappingURL=getNextTickFunction.js.map","import Database, { configure } from './Database.js';\nexport { default as Database, configure } from './Database.js';\n\n// https://github.com/TryGhost/node-sqlite3/wiki/API#sqlite3verbose\n// \"Sets the execution mode to verbose to produce long stack traces.\n//  There is no way to reset this. See the wiki page on debugging for more information\".\nexport function verbose() {\n  var VerboseLib = {\n    Database: Database,\n    verbose: function verbose() {\n      return VerboseLib;\n    }\n  };\n  return VerboseLib;\n}\nexport default {\n  Database: Database,\n  verbose: verbose,\n  configure: configure\n};\n//# sourceMappingURL=index.js.map"],"names":["has","Object","prototype","hasOwnProperty","prefix","Events","EE","fn","context","once","this","addListener","emitter","event","TypeError","listener","evt","_events","push","_eventsCount","clearEvent","EventEmitter","create","__proto__","eventNames","events","name","names","call","slice","getOwnPropertySymbols","concat","listeners","handlers","i","l","length","ee","Array","listenerCount","emit","a1","a2","a3","a4","a5","args","len","arguments","removeListener","undefined","apply","j","on","removeAllListeners","off","prefixed","module","exports","_typeof","o","Symbol","iterator","constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","_toPropertyKey","key","t","r","e","toPrimitive","String","Number","_toPrimitive","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","self","ReferenceError","_assertThisInitialized","Boolean","valueOf","setPrototypeOf","getPrototypeOf","bind","_setPrototypeOf","p","config","configure","_ref","initSqlJs","wasmFileBaseUrl","Database","_EventEmitter","filename","mode","callback","_this","instance","Constructor","_classCallCheck","callCallbackAsynchronously","error","sqlJsWasmFileBaseUrl","window","SQL_JS_WASM_FILE_BASE_URL","isNodeJs","process","release","onError","Error","Promise","resolve","import","then","_","reject","locateFile","SQL","database","protoProps","staticProps","subClass","superClass","value","_inherits","close","option","path","func","_this2","_len","_key","_getRunArguments","getRunArguments","query","unboundCallback","parameters","statement","run","isInsert","test","isUpdate","isDelete","getValue","exec","values","lastID","changes","_len2","_key2","_getRunArguments2","results","each","result","_len3","_key3","_getRunArguments3","_len4","_key4","_getRunArguments4","_len5","_key5","_getRunArguments5","prepare","nextTick","f","canSetImmediate","setImmediate","canPost","postMessage","addEventListener","queue","ev","source","data","stopPropagation","shift","setTimeout","getNextTickFunction","pop","verbose","VerboseLib","index"],"mappings":"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","x_google_ignoreList":[0]}